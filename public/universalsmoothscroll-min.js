"use strict";const INITIAL_WINDOW_WIDTH=window.innerWidth;const INITIAL_WINDOW_HEIGHT=window.innerHeight;const DEFAULT_XSTEP_LENGTH=16+7/1508*(INITIAL_WINDOW_WIDTH-412);const DEFAULT_YSTEP_LENGTH=Math.max(1,Math.abs(38-20/140*(INITIAL_WINDOW_HEIGHT-789)));const DEFAULT_MIN_ANIMATION_FRAMES=INITIAL_WINDOW_HEIGHT/DEFAULT_YSTEP_LENGTH;const DEFAULT_SCROLL_CALCULATOR_TEST_VALUE=100;const DEFAULT_PAGE_SCROLLER=window;var uss={_containersData:new Map,_xStepLength:DEFAULT_XSTEP_LENGTH,_yStepLength:DEFAULT_YSTEP_LENGTH,_minAnimationFrame:DEFAULT_MIN_ANIMATION_FRAMES,_windowHeight:INITIAL_WINDOW_HEIGHT,_windowWidth:INITIAL_WINDOW_WIDTH,_scrollbarsMaxDimension:0,_pageScroller:DEFAULT_PAGE_SCROLLER,_reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches,_debugMode:"",isXscrolling:function(container=uss._pageScroller){if(container!==window&&!(container instanceof HTMLElement)){return}const _containerData=uss._containersData.get(container)||[];return typeof _containerData[0]==="number"},isYscrolling:function(container=uss._pageScroller){if(container!==window&&!(container instanceof HTMLElement)){return}const _containerData=uss._containersData.get(container)||[];return typeof _containerData[1]==="number"},isScrolling:function(container=uss._pageScroller){if(container!==window&&!(container instanceof HTMLElement)){return}const _containerData=uss._containersData.get(container)||[];return typeof _containerData[0]==="number"||typeof _containerData[1]==="number"},getFinalXPosition:function(container=uss._pageScroller){if(container!==window&&!(container instanceof HTMLElement)){return}const _containerData=uss._containersData.get(container)||[];return typeof _containerData[0]==="number"?_containerData[2]:uss.getScrollXCalculator(container)()},getFinalYPosition:function(container=uss._pageScroller){if(container!==window&&!(container instanceof HTMLElement)){return}const _containerData=uss._containersData.get(container)||[];return typeof _containerData[1]==="number"?_containerData[3]:uss.getScrollYCalculator(container)()},getXStepLengthCalculator:function(container=uss._pageScroller,getTemporary=false){if(container!==window&&!(container instanceof HTMLElement)){return}const _containerData=uss._containersData.get(container)||[];return getTemporary?_containerData[14]:_containerData[12]},getYStepLengthCalculator:function(container=uss._pageScroller,getTemporary=false){if(container!==window&&!(container instanceof HTMLElement)){return}const _containerData=uss._containersData.get(container)||[];return getTemporary?_containerData[15]:_containerData[13]},getXStepLength:function(){return uss._xStepLength},getYStepLength:function(){return uss._yStepLength},getMinAnimationFrame:function(){return uss._minAnimationFrame},getWindowHeight:function(){return uss._windowHeight},getWindowWidth:function(){return uss._windowWidth},getScrollbarsMaxDimension:function(){return uss._scrollbarsMaxDimension},getPageScroller:function(){return uss._pageScroller},getReducedMotionState:function(){return uss._reducedMotion},getDebugMode:function(){return uss._debugMode},setXStepLengthCalculator:function(newCalculator,container=uss._pageScroller,isTemporary=false){if(typeof newCalculator!=="function"){return}if(container!==window&&!(container instanceof HTMLElement)){return}const _testResult=newCalculator(DEFAULT_SCROLL_CALCULATOR_TEST_VALUE,0,0,DEFAULT_SCROLL_CALCULATOR_TEST_VALUE,0,DEFAULT_SCROLL_CALCULATOR_TEST_VALUE,container);if(!Number.isFinite(_testResult)){return}const _containerData=uss._containersData.get(container)||[];if(isTemporary)_containerData[14]=newCalculator;else{_containerData[12]=newCalculator;_containerData[14]=null}uss._containersData.set(container,_containerData)},setYStepLengthCalculator:function(newCalculator,container=uss._pageScroller,isTemporary=false){if(typeof newCalculator!=="function"){return}if(container!==window&&!(container instanceof HTMLElement)){return}const _testResult=newCalculator(DEFAULT_SCROLL_CALCULATOR_TEST_VALUE,0,0,DEFAULT_SCROLL_CALCULATOR_TEST_VALUE,0,DEFAULT_SCROLL_CALCULATOR_TEST_VALUE,container);if(!Number.isFinite(_testResult)){return}const _containerData=uss._containersData.get(container)||[];if(isTemporary)_containerData[15]=newCalculator;else{_containerData[13]=newCalculator;_containerData[15]=null}uss._containersData.set(container,_containerData)},setStepLengthCalculator:function(newCalculator,container=uss._pageScroller,isTemporary=false){if(typeof newCalculator!=="function"){return}if(container!==window&&!(container instanceof HTMLElement)){return}const _testResult=newCalculator(DEFAULT_SCROLL_CALCULATOR_TEST_VALUE,0,0,DEFAULT_SCROLL_CALCULATOR_TEST_VALUE,0,DEFAULT_SCROLL_CALCULATOR_TEST_VALUE,container);if(!Number.isFinite(_testResult)){return}const _containerData=uss._containersData.get(container)||[];if(isTemporary){_containerData[14]=newCalculator;_containerData[15]=newCalculator}else{_containerData[12]=newCalculator;_containerData[13]=newCalculator;_containerData[14]=null;_containerData[15]=null}uss._containersData.set(container,_containerData)},setXStepLength:function(newXStepLength){if(!Number.isFinite(newXStepLength)||newXStepLength<=0){return}uss._xStepLength=newXStepLength},setYStepLength:function(newYStepLength){if(!Number.isFinite(newYStepLength)||newYStepLength<=0){return}uss._yStepLength=newYStepLength},setStepLength:function(newStepLength){if(!Number.isFinite(newStepLength)||newStepLength<=0){return}uss._xStepLength=newStepLength;uss._yStepLength=newStepLength},setMinAnimationFrame:function(newMinAnimationFrame){if(!Number.isFinite(newMinAnimationFrame)||newMinAnimationFrame<=0){return}uss._minAnimationFrame=newMinAnimationFrame},setPageScroller:function(newPageScroller){if(newPageScroller!==window&&!(newPageScroller instanceof HTMLElement)){return}uss._pageScroller=newPageScroller},setDebugMode:function(newDebugMode=""){if(typeof newDebugMode!=="string"){let _oldMode=null;if(/disabled/i.test(uss._debugMode)){_oldMode=uss._debugMode;uss._debugMode="legacy"}if(!!_oldMode)uss._debugMode=_oldMode;return}uss._debugMode=newDebugMode},calcXStepLength:function(deltaX){if(!Number.isFinite(deltaX)||deltaX<0){throw"USS fatal error (execution stopped)"}return deltaX>=uss._minAnimationFrame*uss._xStepLength?uss._xStepLength:Math.ceil(deltaX/uss._minAnimationFrame)},calcYStepLength:function(deltaY){if(!Number.isFinite(deltaY)||deltaY<0){throw"USS fatal error (execution stopped)"}return deltaY>=uss._minAnimationFrame*uss._yStepLength?uss._yStepLength:Math.ceil(deltaY/uss._minAnimationFrame)},calcScrollbarsDimensions:function(element){if(element===window)return[0,0];if(!(element instanceof HTMLElement)){throw"USS fatal error (execution stopped)"}if(uss._scrollbarsMaxDimension===0)return[0,0];const _scrollbarsDimensions=[];const _elementStyle=window.getComputedStyle(element);const _originalWidth=Number.parseInt(_elementStyle.width);const _originalHeight=Number.parseInt(_elementStyle.height);const _clientWidth=element.clientWidth;const _clientHeight=element.clientHeight;const _originalOverflowX=element.style.overflowX;const _originalOverflowY=element.style.overflowY;const _originalScrollLeft=element.scrollLeft;const _originalScrollTop=element.scrollTop;element.style.overflowX="hidden";element.style.overflowY="hidden";_scrollbarsDimensions[0]=Number.parseInt(_elementStyle.width)-_originalWidth;_scrollbarsDimensions[1]=Number.parseInt(_elementStyle.height)-_originalHeight;if(_scrollbarsDimensions[0]===0)_scrollbarsDimensions[0]=element.clientWidth-_clientWidth;else if(_scrollbarsDimensions[0]<0)_scrollbarsDimensions[0]=0;if(_scrollbarsDimensions[1]===0)_scrollbarsDimensions[1]=element.clientHeight-_clientHeight;else if(_scrollbarsDimensions[1]<0)_scrollbarsDimensions[1]=0;element.style.overflowX=_originalOverflowX;element.style.overflowY=_originalOverflowY;element.scrollLeft=_originalScrollLeft;element.scrollTop=_originalScrollTop;return _scrollbarsDimensions},calcBordersDimensions:function(element){if(element===window)return[0,0,0,0];if(!(element instanceof HTMLElement)){throw"USS fatal error (execution stopped)"}const _style=window.getComputedStyle(element);return[Number.parseInt(_style.borderTopWidth),Number.parseInt(_style.borderRightWidth),Number.parseInt(_style.borderBottomWidth),Number.parseInt(_style.borderLeftWidth)]},getScrollXCalculator:function(container=uss._pageScroller){return container===window?()=>{return window.scrollX}:container instanceof HTMLElement?()=>{return container.scrollLeft}:()=>{throw"USS fatal error (execution stopped)"}},getScrollYCalculator:function(container=uss._pageScroller){return container===window?()=>{return window.scrollY}:container instanceof HTMLElement?()=>{return container.scrollTop}:()=>{throw"USS fatal error (execution stopped)"}},getMaxScrollX:function(container=uss._pageScroller){if(container===window){const _originalXPosition=window.scrollX;container.scroll(1073741824,window.scrollY);const _maxScroll=window.scrollX;container.scroll(_originalXPosition,window.scrollY);return _maxScroll}if(container===document.documentElement||container===document.body){const _originalXPosition=container.scrollLeft;container.scrollLeft=1073741824;const _maxScroll=container.scrollLeft;container.scrollLeft=_originalXPosition;return _maxScroll}if(container instanceof HTMLElement)return container.scrollWidth-container.clientWidth},getMaxScrollY:function(container=uss._pageScroller){if(container===window){const _originalYPosition=window.scrollY;container.scroll(window.scrollX,1073741824);const _maxScroll=window.scrollY;container.scroll(window.scrollX,_originalYPosition);return _maxScroll}if(container===document.documentElement||container===document.body){const _originalYPosition=container.scrollTop;container.scrollTop=1073741824;const _maxScroll=container.scrollTop;container.scrollTop=_originalYPosition;return _maxScroll}if(container instanceof HTMLElement)return container.scrollHeight-container.clientHeight},getXScrollableParent:function(element,includeHiddenParents=false){if(element===window)return null;try{let _style=window.getComputedStyle(element);if(_style.position==="fixed")return null;const _relativePositioned=_style.position!=="absolute";const _overflowRegex=includeHiddenParents?/(auto|scroll|hidden)/:/(auto|scroll)/;let _container=element.parentElement;while(_container){_style=window.getComputedStyle(_container);if(_relativePositioned||_style.position!=="static")if(_overflowRegex.test(_style.overflowX))if(_container.scrollWidth>_container.clientWidth)return _container;if(_style.position==="fixed")return null;_container=_container.parentElement}}catch(e){}return window},getYScrollableParent:function(element,includeHiddenParents=false){if(element===window)return null;try{let _style=window.getComputedStyle(element);if(_style.position==="fixed")return null;const _relativePositioned=_style.position!=="absolute";const _overflowRegex=includeHiddenParents?/(auto|scroll|hidden)/:/(auto|scroll)/;let _container=element.parentElement;while(_container){_style=window.getComputedStyle(_container);if(_relativePositioned||_style.position!=="static")if(_overflowRegex.test(_style.overflowY))if(_container.scrollHeight>_container.clientHeight)return _container;if(_style.position==="fixed")return null;_container=_container.parentElement}}catch(e){}return window},getScrollableParent:function(element,includeHiddenParents=false){if(element===window)return null;try{let _style=window.getComputedStyle(element);if(_style.position==="fixed")return null;const _relativePositioned=_style.position!=="absolute";const _overflowRegex=includeHiddenParents?/(auto|scroll|hidden)/:/(auto|scroll)/;let _container=element.parentElement;while(_container){_style=window.getComputedStyle(_container);if(_relativePositioned||_style.position!=="static")if(_overflowRegex.test(_style.overflow))if(_container.scrollWidth>_container.clientWidth||_container.scrollHeight>_container.clientHeight)return _container;if(_style.position==="fixed")return null;_container=_container.parentElement}}catch(e){}return window},getAllScrollableParents:function(element,includeHiddenParents=false,callback){const _scrollableParents=[];if(element===window)return _scrollableParents;try{let _style=window.getComputedStyle(element);if(_style.position==="fixed")return _scrollableParents;const _callback=typeof callback==="function"?callback:()=>{};const _relativePositioned=_style.position!=="absolute";const _overflowRegex=includeHiddenParents?/(auto|scroll|hidden)/:/(auto|scroll)/;let _includeWindow=true;let _container=element.parentElement;while(_container){_style=window.getComputedStyle(_container);if(_relativePositioned||_style.position!=="static")if(_overflowRegex.test(_style.overflow))if(_container.scrollWidth>_container.clientWidth||_container.scrollHeight>_container.clientHeight){if(_container===document.body||_container===document.documentElement)_includeWindow=false;_scrollableParents.push(_container);_callback(_container)}if(_style.position==="fixed")return _scrollableParents;_container=_container.parentElement}if(_includeWindow){_scrollableParents.push(window);_callback(window)}}catch(e){}return _scrollableParents},scrollXTo:function(finalXPosition,container=uss._pageScroller,callback){if(!Number.isFinite(finalXPosition)){return}if(container!==window&&!(container instanceof HTMLElement)){return}if(uss.getMaxScrollX(container)<1){uss.stopScrollingX(container,callback);return}const _scrollXCalculator=uss.getScrollXCalculator(container);let _totalScrollAmount=finalXPosition-_scrollXCalculator();const _direction=_totalScrollAmount>0?1:-1;_totalScrollAmount*=_direction;if(_totalScrollAmount<1){uss.stopScrollingX(container,callback);return}const _scroll=container!==window?finalPos=>container.scrollLeft=finalPos:finalPos=>container.scroll(finalPos,window.scrollY);if(uss._reducedMotion){_scroll(finalXPosition);uss.stopScrollingX(container,callback);return}const _containerData=uss._containersData.get(container)||[];_containerData[2]=finalXPosition;_containerData[4]=_direction;_containerData[6]=_totalScrollAmount;_containerData[8]=performance.now();_containerData[10]=callback;if(typeof _containerData[0]==="number")return;_containerData[0]=window.requestAnimationFrame(_stepX);uss._containersData.set(container,_containerData);let _calculatedScrollStepLength;function _stepX(timestamp){const finalXPosition=_containerData[2];const _direction=_containerData[4];const _currentXPosition=_scrollXCalculator();const _remaningScrollAmount=(finalXPosition-_currentXPosition)*_direction;if(_remaningScrollAmount<=0){_containerData[0]=null;_containerData[14]=null;if(typeof _containerData[10]==="function")window.requestAnimationFrame(_containerData[10]);return}try{const _scrollID=_containerData[0];const _calculatorIndex=typeof _containerData[14]==="function"?14:12;_calculatedScrollStepLength=_containerData[_calculatorIndex](_remaningScrollAmount,_containerData[8],timestamp,_containerData[6],_currentXPosition,finalXPosition,container);if(_scrollID!==_containerData[0])return;if(finalXPosition!==_containerData[2]){_containerData[0]=window.requestAnimationFrame(_stepX);return}if(!Number.isFinite(_calculatedScrollStepLength)){_calculatedScrollStepLength=uss.calcXStepLength(_totalScrollAmount)}}catch(e){_calculatedScrollStepLength=uss.calcXStepLength(_totalScrollAmount)}if(_remaningScrollAmount<=_calculatedScrollStepLength){_containerData[0]=null;_containerData[14]=null;_scroll(finalXPosition);if(typeof _containerData[10]==="function")window.requestAnimationFrame(_containerData[10]);return}_scroll(_currentXPosition+_calculatedScrollStepLength*_direction);if(_calculatedScrollStepLength!==0&&_currentXPosition===_scrollXCalculator()){_containerData[0]=null;_containerData[14]=null;if(typeof _containerData[10]==="function")window.requestAnimationFrame(_containerData[10]);return}_containerData[0]=window.requestAnimationFrame(_stepX)}},scrollYTo:function(finalYPosition,container=uss._pageScroller,callback){if(!Number.isFinite(finalYPosition)){return}if(container!==window&&!(container instanceof HTMLElement)){return}if(uss.getMaxScrollY(container)<1){uss.stopScrollingY(container,callback);return}const _scrollYCalculator=uss.getScrollYCalculator(container);let _totalScrollAmount=finalYPosition-_scrollYCalculator();const _direction=_totalScrollAmount>0?1:-1;_totalScrollAmount*=_direction;if(_totalScrollAmount<1){uss.stopScrollingY(container,callback);return}const _scroll=container!==window?finalPos=>container.scrollTop=finalPos:finalPos=>container.scroll(window.scrollX,finalPos);if(uss._reducedMotion){_scroll(finalYPosition);uss.stopScrollingY(container,callback);return}const _containerData=uss._containersData.get(container)||[];_containerData[3]=finalYPosition;_containerData[5]=_direction;_containerData[7]=_totalScrollAmount;_containerData[9]=performance.now();_containerData[11]=callback;if(typeof _containerData[1]==="number")return;_containerData[1]=window.requestAnimationFrame(_stepY);uss._containersData.set(container,_containerData);let _calculatedScrollStepLength;function _stepY(timestamp){const finalYPosition=_containerData[3];const _direction=_containerData[5];const _currentYPosition=_scrollYCalculator();const _remaningScrollAmount=(finalYPosition-_currentYPosition)*_direction;if(_remaningScrollAmount<=0){_containerData[1]=null;_containerData[15]=null;if(typeof _containerData[11]==="function")window.requestAnimationFrame(_containerData[11]);return}try{const _scrollID=_containerData[1];const _calculatorIndex=typeof _containerData[15]==="function"?15:13;_calculatedScrollStepLength=_containerData[_calculatorIndex](_remaningScrollAmount,_containerData[9],timestamp,_containerData[7],_currentYPosition,finalYPosition,container);if(_scrollID!==_containerData[1])return;if(finalYPosition!==_containerData[3]){_containerData[1]=window.requestAnimationFrame(_stepY);return}if(!Number.isFinite(_calculatedScrollStepLength)){_calculatedScrollStepLength=uss.calcYStepLength(_totalScrollAmount)}}catch(e){_calculatedScrollStepLength=uss.calcYStepLength(_totalScrollAmount)}if(_remaningScrollAmount<=_calculatedScrollStepLength){_containerData[1]=null;_containerData[15]=null;_scroll(finalYPosition);if(typeof _containerData[11]==="function")window.requestAnimationFrame(_containerData[11]);return}_scroll(_currentYPosition+_calculatedScrollStepLength*_direction);if(_calculatedScrollStepLength!==0&&_currentYPosition===_scrollYCalculator()){_containerData[1]=null;_containerData[15]=null;if(typeof _containerData[11]==="function")window.requestAnimationFrame(_containerData[11]);return}_containerData[1]=window.requestAnimationFrame(_stepY)}},scrollXBy:function(deltaX,container=uss._pageScroller,callback,stillStart=true){if(!Number.isFinite(deltaX)){return}if(container!==window&&!(container instanceof HTMLElement)){return}if(!stillStart){const _containerData=uss._containersData.get(container)||[];if(typeof _containerData[0]==="number"){_containerData[10]=callback;if(deltaX===0)return;_containerData[2]+=deltaX;const _totalScrollAmount=_containerData[2]-uss.getScrollXCalculator(container)();_containerData[4]=_totalScrollAmount>0?1:-1;_containerData[6]=_totalScrollAmount*_containerData[4];_containerData[8]=performance.now();return}}uss.scrollXTo(uss.getScrollXCalculator(container)()+deltaX,container,callback)},scrollYBy:function(deltaY,container=uss._pageScroller,callback,stillStart=true){if(!Number.isFinite(deltaY)){return}if(container!==window&&!(container instanceof HTMLElement)){return}if(!stillStart){const _containerData=uss._containersData.get(container)||[];if(typeof _containerData[1]==="number"){_containerData[11]=callback;if(deltaY===0)return;_containerData[3]+=deltaY;const _totalScrollAmount=_containerData[3]-uss.getScrollYCalculator(container)();_containerData[5]=_totalScrollAmount>0?1:-1;_containerData[7]=_totalScrollAmount*_containerData[5];_containerData[9]=performance.now();return}}uss.scrollYTo(uss.getScrollYCalculator(container)()+deltaY,container,callback)},scrollTo:function(finalXPosition,finalYPosition,container=uss._pageScroller,callback){if(!Number.isFinite(finalXPosition)){return}if(!Number.isFinite(finalYPosition)){return}if(container!==window&&!(container instanceof HTMLElement)){return}let _callback={__requiredSteps:1,__currentSteps:0,__function:typeof callback==="function"?()=>{if(_callback.__currentSteps<_callback.__requiredSteps){_callback.__currentSteps++;return}callback()}:null};uss.scrollXTo(finalXPosition,container,_callback.__function);uss.scrollYTo(finalYPosition,container,_callback.__function)},scrollBy:function(deltaX,deltaY,container=uss._pageScroller,callback,stillStart=true){if(!Number.isFinite(deltaX)){return}if(!Number.isFinite(deltaY)){return}if(container!==window&&!(container instanceof HTMLElement)){return}let _finalXPosition;let _finalYPosition;if(!stillStart){const _containerData=uss._containersData.get(container)||[];_finalXPosition=typeof _containerData[0]==="number"?_containerData[2]:uss.getScrollXCalculator(container)();_finalYPosition=typeof _containerData[1]==="number"?_containerData[3]:uss.getScrollYCalculator(container)()}else{_finalXPosition=uss.getScrollXCalculator(container)();_finalYPosition=uss.getScrollYCalculator(container)()}uss.scrollTo(_finalXPosition+deltaX,_finalYPosition+deltaY,container,callback)},scrollIntoView:function(element,alignToLeft=true,alignToTop=true,callback,includeHiddenParents=false){if(element===window){if(typeof callback==="function")window.requestAnimationFrame(callback);return}if(!(element instanceof HTMLElement)){return}let _containerIndex=-1;const _containers=uss.getAllScrollableParents(element,includeHiddenParents,()=>_containerIndex++);if(_containerIndex<0){if(typeof callback==="function")window.requestAnimationFrame(callback);return}let _alignToTop=alignToTop;let _alignToLeft=alignToLeft;let _currentElement,_currentContainer;_currentContainer=_containers[_containerIndex];_currentElement=_containerIndex<1?element:_containers[_containerIndex-1];_scrollContainer();function _scrollContainer(){const _scrollbarsDimensions=uss.calcScrollbarsDimensions(_currentContainer);const _bordersDimensions=uss.calcBordersDimensions(_currentContainer);const _containerRect=_currentContainer!==window?_currentContainer.getBoundingClientRect():{left:0,top:0,width:uss._windowWidth,height:uss._windowHeight};const _containerWidth=_containerRect.width;const _containerHeight=_containerRect.height;const _elementRect=_currentElement.getBoundingClientRect();const _elementWidth=_elementRect.width;const _elementHeight=_elementRect.height;const _elementInitialX=_elementRect.left-_containerRect.left;const _elementInitialY=_elementRect.top-_containerRect.top;if(alignToLeft==="nearest"){const _leftDelta=_elementInitialX>0?_elementInitialX:-_elementInitialX;const _rightDelta=Math.abs(_containerWidth-_elementInitialX-_elementWidth);const _centerDelta=Math.abs(.5*(_containerWidth-_elementWidth)-_elementInitialX);_alignToLeft=_leftDelta<_centerDelta?true:_rightDelta<_centerDelta?false:null}if(alignToTop==="nearest"){const _topDelta=_elementInitialY>0?_elementInitialY:-_elementInitialY;const _bottomDelta=Math.abs(_containerHeight-_elementInitialY-_elementHeight);const _centerDelta=Math.abs(.5*(_containerHeight-_elementHeight)-_elementInitialY);_alignToTop=_topDelta<_centerDelta?true:_bottomDelta<_centerDelta?false:null}const _elementFinalX=_alignToLeft===true?_bordersDimensions[3]:_alignToLeft===false?_containerWidth-_elementWidth-_scrollbarsDimensions[0]-_bordersDimensions[1]:(_containerWidth-_elementWidth-_scrollbarsDimensions[0]-_bordersDimensions[1]+_bordersDimensions[3])*.5;const _elementFinalY=_alignToTop===true?_bordersDimensions[0]:_alignToTop===false?_containerHeight-_elementHeight-_scrollbarsDimensions[1]-_bordersDimensions[2]:(_containerHeight-_elementHeight-_scrollbarsDimensions[1]-_bordersDimensions[2]+_bordersDimensions[0])*.5;uss.scrollBy(_elementInitialX-_elementFinalX,_elementInitialY-_elementFinalY,_currentContainer,()=>{if(_currentElement===element){if(typeof callback==="function")window.requestAnimationFrame(callback);return}_containerIndex--;_currentContainer=_containers[_containerIndex];_currentElement=_containerIndex<1?element:_containers[_containerIndex-1];_scrollContainer()})}},scrollIntoViewIfNeeded:function(element,alignToCenter=true,callback,includeHiddenParents=false){if(element===window){if(typeof callback==="function")window.requestAnimationFrame(callback);return}if(!(element instanceof HTMLElement)){return}let _containerIndex=-1;const _containers=uss.getAllScrollableParents(element,includeHiddenParents,()=>_containerIndex++);if(_containerIndex<0){if(typeof callback==="function")window.requestAnimationFrame(callback);return}let _alignToTop=null;let _alignToLeft=null;let _currentElement,_currentContainer;_currentContainer=_containers[_containerIndex];_currentElement=_containerIndex<1?element:_containers[_containerIndex-1];_scrollContainer();function _scrollContainer(){const _scrollbarsDimensions=uss.calcScrollbarsDimensions(_currentContainer);const _bordersDimensions=uss.calcBordersDimensions(_currentContainer);const _containerRect=_currentContainer!==window?_currentContainer.getBoundingClientRect():{left:0,top:0,width:uss._windowWidth,height:uss._windowHeight};const _containerWidth=_containerRect.width;const _containerHeight=_containerRect.height;const _elementRect=_currentElement.getBoundingClientRect();const _elementWidth=_elementRect.width;const _elementHeight=_elementRect.height;const _elementInitialX=_elementRect.left-_containerRect.left;const _elementInitialY=_elementRect.top-_containerRect.top;const _elementIntoViewX=_elementInitialX>-1&&_elementInitialX+_elementWidth-_containerWidth+_scrollbarsDimensions[0]<1;const _elementIntoViewY=_elementInitialY>-1&&_elementInitialY+_elementHeight-_containerHeight+_scrollbarsDimensions[1]<1;const _elementOverflowX=_elementInitialX<=0&&_elementInitialX+_elementWidth-_containerWidth+_scrollbarsDimensions[0]>=0;const _elementOverflowY=_elementInitialY<=0&&_elementInitialY+_elementHeight-_containerHeight+_scrollbarsDimensions[1]>=0;const _isOriginalElement=_currentElement===element;let _scrollNotNeededX=_elementIntoViewX||_isOriginalElement&&_elementOverflowX;let _scrollNotNeededY=_elementIntoViewY||_isOriginalElement&&_elementOverflowY;if(_scrollNotNeededX&&_scrollNotNeededY){if(_isOriginalElement){if(typeof callback==="function")window.requestAnimationFrame(callback)}else{_containerIndex--;_currentContainer=_containers[_containerIndex];_currentElement=_containerIndex<1?element:_containers[_containerIndex-1];_scrollContainer()}return}if(_isOriginalElement&&alignToCenter===true){_scrollNotNeededX=false;_scrollNotNeededY=false}else{if(!_scrollNotNeededX){const _leftDelta=_elementInitialX>0?_elementInitialX:-_elementInitialX;const _rightDelta=Math.abs(_containerWidth-_elementInitialX-_elementWidth);const _centerDelta=Math.abs(.5*(_containerWidth-_elementWidth)-_elementInitialX);_alignToLeft=_leftDelta<_centerDelta?true:_rightDelta<_centerDelta?false:null}if(!_scrollNotNeededY){const _topDelta=_elementInitialY>0?_elementInitialY:-_elementInitialY;const _bottomDelta=Math.abs(_containerHeight-_elementInitialY-_elementHeight);const _centerDelta=Math.abs(.5*(_containerHeight-_elementHeight)-_elementInitialY);_alignToTop=_topDelta<_centerDelta?true:_bottomDelta<_centerDelta?false:null}}const _elementFinalX=_scrollNotNeededX?_elementInitialX:_alignToLeft===true?_bordersDimensions[3]:_alignToLeft===false?_containerWidth-_elementWidth-_scrollbarsDimensions[0]-_bordersDimensions[1]:(_containerWidth-_elementWidth-_scrollbarsDimensions[0]-_bordersDimensions[1]+_bordersDimensions[3])*.5;const _elementFinalY=_scrollNotNeededY?_elementInitialY:_alignToTop===true?_bordersDimensions[0]:_alignToTop===false?_containerHeight-_elementHeight-_scrollbarsDimensions[1]-_bordersDimensions[2]:(_containerHeight-_elementHeight-_scrollbarsDimensions[1]-_bordersDimensions[2]+_bordersDimensions[0])*.5;uss.scrollBy(_elementInitialX-_elementFinalX,_elementInitialY-_elementFinalY,_currentContainer,()=>{if(_currentElement===element){if(typeof callback==="function")window.requestAnimationFrame(callback);return}_containerIndex--;_currentContainer=_containers[_containerIndex];_currentElement=_containerIndex<1?element:_containers[_containerIndex-1];_scrollContainer()})}},stopScrollingX:function(container=uss._pageScroller,callback){if(container!==window&&!(container instanceof HTMLElement)){return}const _containerData=uss._containersData.get(container)||[];window.cancelAnimationFrame(_containerData[0]);_containerData[0]=null;_containerData[14]=null;if(typeof callback==="function")window.requestAnimationFrame(callback)},stopScrollingY:function(container=uss._pageScroller,callback){if(container!==window&&!(container instanceof HTMLElement)){return}const _containerData=uss._containersData.get(container)||[];window.cancelAnimationFrame(_containerData[1]);_containerData[1]=null;_containerData[15]=null;if(typeof callback==="function")window.requestAnimationFrame(callback)},stopScrolling:function(container=uss._pageScroller,callback){if(container!==window&&!(container instanceof HTMLElement)){return}const _containerData=uss._containersData.get(container)||[];window.cancelAnimationFrame(_containerData[0]);window.cancelAnimationFrame(_containerData[1]);_containerData[0]=null;_containerData[1]=null;_containerData[14]=null;_containerData[15]=null;if(typeof callback==="function")window.requestAnimationFrame(callback)},hrefSetup:function(alignToLeft=true,alignToTop=true,init,callback,includeHiddenParents=false,updateHistory=false){const _init=typeof init==="function"?init:()=>{};const _pageLinks=document.links;const _pageURL=document.URL.split("#")[0];const _updateHistory=updateHistory&&!!(window.history&&window.history.pushState&&window.history.scrollRestoration);if(_updateHistory){window.history.scrollRestoration="manual";window.addEventListener("popstate",_smoothHistoryNavigation,{passive:true});window.addEventListener("unload",e=>{e.preventDefault()},{passive:false});function _smoothHistoryNavigation(){const _fragment=document.URL.split("#")[1];if(!_fragment){if(_init(window,uss._pageScroller)!==false)uss.scrollTo(0,0,uss._pageScroller,callback);return}const __elementToReach=document.getElementById(_fragment)||document.querySelector("a[name='"+_fragment+"']");if(__elementToReach!==null&&_init(window,__elementToReach)!==false){uss.scrollIntoView(__elementToReach,alignToLeft,alignToTop,callback,includeHiddenParents)}}}for(const _pageLink of _pageLinks){const _pageLinkParts=_pageLink.href.split("#");if(_pageLinkParts[0]!==_pageURL)continue;if(_pageLinkParts[1]===""){_pageLink.addEventListener("click",event=>{event.preventDefault();event.stopPropagation();if(_init(_pageLink,uss._pageScroller)===false)return;if(_updateHistory&&window.history.state!=="#")window.history.pushState("#","","#");uss.scrollTo(0,0,uss._pageScroller,callback)},{passive:false});continue}const _elementToReach=document.getElementById(_pageLinkParts[1])||document.querySelector("a[name='"+_pageLinkParts[1]+"']");if(_elementToReach===null){continue}_pageLink.addEventListener("click",event=>{event.preventDefault();event.stopPropagation();if(_init(_pageLink,_elementToReach)===false)return;if(_updateHistory&&window.history.state!==_pageLinkParts[1])window.history.pushState(_pageLinkParts[1],"","#"+_pageLinkParts[1]);uss.scrollIntoView(_elementToReach,alignToLeft,alignToTop,callback,includeHiddenParents)},{passive:false})}}};window.uss=uss;window.addEventListener("resize",()=>{uss._windowHeight=window.innerHeight;uss._windowWidth=window.innerWidth},{passive:true});window.addEventListener("load",function calcMaxScrollbarsDimensions(){const __scrollBox=document.createElement("div");__scrollBox.style.overflowX="scroll";document.body.appendChild(__scrollBox);uss._scrollbarsMaxDimension=__scrollBox.offsetHeight-__scrollBox.clientHeight;document.body.removeChild(__scrollBox);window.removeEventListener("load",calcMaxScrollbarsDimensions)},{passive:true});try{window.matchMedia("(prefers-reduced-motion)").addEventListener("change",()=>{uss._reducedMotion=!uss._reducedMotion;const _containers=uss._containersData.keys();for(let _container of _containers)uss.stopScrolling(_container)},{passive:true})}catch(e){window.matchMedia("(prefers-reduced-motion)").addListener(()=>{uss._reducedMotion=!uss._reducedMotion;const _containers=uss._containersData.keys();for(let _container of _containers)uss.stopScrolling(_container)},{passive:true})}