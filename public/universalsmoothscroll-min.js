"use strict";const INITIAL_WINDOW_WIDTH=window.innerWidth,INITIAL_WINDOW_HEIGHT=window.innerHeight,DEFAULT_XSTEP_LENGTH=16+7/1508*(INITIAL_WINDOW_WIDTH-412),DEFAULT_YSTEP_LENGTH=Math.max(1,Math.abs(38-20/140*(INITIAL_WINDOW_HEIGHT-789))),DEFAULT_MIN_ANIMATION_FRAMES=INITIAL_WINDOW_HEIGHT/DEFAULT_YSTEP_LENGTH,DEFAULT_SCROLL_CALCULATOR_TEST_VALUE=100,DEFAULT_PAGE_SCROLLER=window,uss={_containersData:new Map,_xStepLength:DEFAULT_XSTEP_LENGTH,_yStepLength:DEFAULT_YSTEP_LENGTH,_minAnimationFrame:DEFAULT_MIN_ANIMATION_FRAMES,_windowHeight:INITIAL_WINDOW_HEIGHT,_windowWidth:INITIAL_WINDOW_WIDTH,_scrollbarsMaxDimension:0,_pageScroller:DEFAULT_PAGE_SCROLLER,_reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches,_debugMode:"",isXscrolling:function(e=uss._pageScroller){if(e===window||e instanceof HTMLElement)return"number"==typeof(uss._containersData.get(e)||[])[0]},isYscrolling:function(e=uss._pageScroller){if(e===window||e instanceof HTMLElement)return"number"==typeof(uss._containersData.get(e)||[])[1]},isScrolling:function(e=uss._pageScroller){if(e===window||e instanceof HTMLElement)return e=uss._containersData.get(e)||[],"number"==typeof e[0]||"number"==typeof e[1]},getFinalXPosition:function(e=uss._pageScroller){var t;if(e===window||e instanceof HTMLElement)return t=uss._containersData.get(e)||[],"number"==typeof t[0]?t[2]:uss.getScrollXCalculator(e)()},getFinalYPosition:function(e=uss._pageScroller){var t;if(e===window||e instanceof HTMLElement)return t=uss._containersData.get(e)||[],"number"==typeof t[1]?t[3]:uss.getScrollYCalculator(e)()},getXStepLengthCalculator:function(e=uss._pageScroller,t=!1){if(e===window||e instanceof HTMLElement)return e=uss._containersData.get(e)||[],t?e[14]:e[12]},getYStepLengthCalculator:function(e=uss._pageScroller,t=!1){if(e===window||e instanceof HTMLElement)return e=uss._containersData.get(e)||[],t?e[15]:e[13]},getXStepLength:function(){return uss._xStepLength},getYStepLength:function(){return uss._yStepLength},getMinAnimationFrame:function(){return uss._minAnimationFrame},getWindowHeight:function(){return uss._windowHeight},getWindowWidth:function(){return uss._windowWidth},getScrollbarsMaxDimension:function(){return uss._scrollbarsMaxDimension},getPageScroller:function(){return uss._pageScroller},getReducedMotionState:function(){return uss._reducedMotion},getDebugMode:function(){return uss._debugMode},setXStepLengthCalculator:function(e,t=uss._pageScroller,n=!1){if("function"==typeof e&&(t===window||t instanceof HTMLElement)){var o=e(DEFAULT_SCROLL_CALCULATOR_TEST_VALUE,0,0,DEFAULT_SCROLL_CALCULATOR_TEST_VALUE,0,DEFAULT_SCROLL_CALCULATOR_TEST_VALUE,t);if(Number.isFinite(o)){const i=uss._containersData.get(t)||[];n?i[14]=e:(i[12]=e,i[14]=null),uss._containersData.set(t,i)}}},setYStepLengthCalculator:function(e,t=uss._pageScroller,n=!1){if("function"==typeof e&&(t===window||t instanceof HTMLElement)){var o=e(DEFAULT_SCROLL_CALCULATOR_TEST_VALUE,0,0,DEFAULT_SCROLL_CALCULATOR_TEST_VALUE,0,DEFAULT_SCROLL_CALCULATOR_TEST_VALUE,t);if(Number.isFinite(o)){const i=uss._containersData.get(t)||[];n?i[15]=e:(i[13]=e,i[15]=null),uss._containersData.set(t,i)}}},setStepLengthCalculator:function(e,t=uss._pageScroller,n=!1){if("function"==typeof e&&(t===window||t instanceof HTMLElement)){var o=e(DEFAULT_SCROLL_CALCULATOR_TEST_VALUE,0,0,DEFAULT_SCROLL_CALCULATOR_TEST_VALUE,0,DEFAULT_SCROLL_CALCULATOR_TEST_VALUE,t);if(Number.isFinite(o)){const i=uss._containersData.get(t)||[];n?(i[14]=e,i[15]=e):(i[12]=e,i[13]=e,i[14]=null,i[15]=null),uss._containersData.set(t,i)}}},setXStepLength:function(e){!Number.isFinite(e)||e<=0||(uss._xStepLength=e)},setYStepLength:function(e){!Number.isFinite(e)||e<=0||(uss._yStepLength=e)},setStepLength:function(e){!Number.isFinite(e)||e<=0||(uss._xStepLength=e,uss._yStepLength=e)},setMinAnimationFrame:function(e){!Number.isFinite(e)||e<=0||(uss._minAnimationFrame=e)},setPageScroller:function(e){(e===window||e instanceof HTMLElement)&&(uss._pageScroller=e)},setDebugMode:function(e=""){if("string"!=typeof e){let e=null;return/disabled/i.test(uss._debugMode)&&(e=uss._debugMode,uss._debugMode="legacy"),void(e&&(uss._debugMode=e))}uss._debugMode=e},calcXStepLength:function(e){if(!Number.isFinite(e)||e<0)throw"USS fatal error (execution stopped)";return e>=uss._minAnimationFrame*uss._xStepLength?uss._xStepLength:Math.ceil(e/uss._minAnimationFrame)},calcYStepLength:function(e){if(!Number.isFinite(e)||e<0)throw"USS fatal error (execution stopped)";return e>=uss._minAnimationFrame*uss._yStepLength?uss._yStepLength:Math.ceil(e/uss._minAnimationFrame)},calcScrollbarsDimensions:function(e){if(e===window)return[0,0];if(!(e instanceof HTMLElement))throw"USS fatal error (execution stopped)";if(0===uss._scrollbarsMaxDimension)return[0,0];const t=[];var n=window.getComputedStyle(e),o=Number.parseInt(n.width),i=Number.parseInt(n.height),s=e.clientWidth,r=e.clientHeight,l=e.style.overflowX,c=e.style.overflowY,u=e.scrollLeft,a=e.scrollTop;return e.style.overflowX="hidden",e.style.overflowY="hidden",t[0]=Number.parseInt(n.width)-o,t[1]=Number.parseInt(n.height)-i,0===t[0]?t[0]=e.clientWidth-s:t[0]<0&&(t[0]=0),0===t[1]?t[1]=e.clientHeight-r:t[1]<0&&(t[1]=0),e.style.overflowX=l,e.style.overflowY=c,e.scrollLeft=u,e.scrollTop=a,t},calcBordersDimensions:function(e){if(e===window)return[0,0,0,0];if(!(e instanceof HTMLElement))throw"USS fatal error (execution stopped)";e=window.getComputedStyle(e);return[Number.parseInt(e.borderTopWidth),Number.parseInt(e.borderRightWidth),Number.parseInt(e.borderBottomWidth),Number.parseInt(e.borderLeftWidth)]},getScrollXCalculator:function(e=uss._pageScroller){return e===window?()=>window.scrollX:e instanceof HTMLElement?()=>e.scrollLeft:()=>{throw"USS fatal error (execution stopped)"}},getScrollYCalculator:function(e=uss._pageScroller){return e===window?()=>window.scrollY:e instanceof HTMLElement?()=>e.scrollTop:()=>{throw"USS fatal error (execution stopped)"}},getMaxScrollX:function(e=uss._pageScroller){var t,n;return e===window?(t=window.scrollX,e.scroll(1073741824,window.scrollY),n=window.scrollX,e.scroll(t,window.scrollY),n):e===document.documentElement||e===document.body?(t=e.scrollLeft,e.scrollLeft=1073741824,n=e.scrollLeft,e.scrollLeft=t,n):e instanceof HTMLElement?e.scrollWidth-e.clientWidth:void 0},getMaxScrollY:function(e=uss._pageScroller){var t,n;return e===window?(t=window.scrollY,e.scroll(window.scrollX,1073741824),n=window.scrollY,e.scroll(window.scrollX,t),n):e===document.documentElement||e===document.body?(t=e.scrollTop,e.scrollTop=1073741824,n=e.scrollTop,e.scrollTop=t,n):e instanceof HTMLElement?e.scrollHeight-e.clientHeight:void 0},getXScrollableParent:function(t,n=!1){if(t===window)return null;try{var o=window.getComputedStyle(t);if("fixed"===o.position)return null;var i="absolute"!==o.position;const s=n?/(auto|scroll|hidden)/:/(auto|scroll)/;let e=t.parentElement;for(;e;){if(o=window.getComputedStyle(e),(i||"static"!==o.position)&&s.test(o.overflowX)&&e.scrollWidth>e.clientWidth)return e;if("fixed"===o.position)return null;e=e.parentElement}}catch(e){}return window},getYScrollableParent:function(t,n=!1){if(t===window)return null;try{var o=window.getComputedStyle(t);if("fixed"===o.position)return null;var i="absolute"!==o.position;const s=n?/(auto|scroll|hidden)/:/(auto|scroll)/;let e=t.parentElement;for(;e;){if(o=window.getComputedStyle(e),(i||"static"!==o.position)&&s.test(o.overflowY)&&e.scrollHeight>e.clientHeight)return e;if("fixed"===o.position)return null;e=e.parentElement}}catch(e){}return window},getScrollableParent:function(t,n=!1){if(t===window)return null;try{var o=window.getComputedStyle(t);if("fixed"===o.position)return null;var i="absolute"!==o.position;const s=n?/(auto|scroll|hidden)/:/(auto|scroll)/;let e=t.parentElement;for(;e;){if(o=window.getComputedStyle(e),(i||"static"!==o.position)&&s.test(o.overflow)&&(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight))return e;if("fixed"===o.position)return null;e=e.parentElement}}catch(e){}return window},getAllScrollableParents:function(n,o=!1,i){const s=[];if(n===window)return s;try{var r=window.getComputedStyle(n);if("fixed"===r.position)return s;const c="function"==typeof i?i:()=>{};var l="absolute"!==r.position;const u=o?/(auto|scroll|hidden)/:/(auto|scroll)/;let e=!0,t=n.parentElement;for(;t;){if(r=window.getComputedStyle(t),(l||"static"!==r.position)&&u.test(r.overflow)&&(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)&&(t!==document.body&&t!==document.documentElement||(e=!1),s.push(t),c(t)),"fixed"===r.position)return s;t=t.parentElement}e&&(s.push(window),c(window))}catch(e){}return s},scrollXTo:function(e,a=uss._pageScroller,t){if(Number.isFinite(e)&&(a===window||a instanceof HTMLElement))if(uss.getMaxScrollX(a)<1)uss.stopScrollingX(a,t);else{const d=uss.getScrollXCalculator(a);let u=e-d();var n=0<u?1:-1;if((u*=n)<1)uss.stopScrollingX(a,t);else{const f=a!==window?e=>a.scrollLeft=e:e=>a.scroll(e,window.scrollY);if(uss._reducedMotion)return f(e),void uss.stopScrollingX(a,t);const w=uss._containersData.get(a)||[];if(w[2]=e,w[4]=n,w[6]=u,w[8]=performance.now(),w[10]=t,"number"!=typeof w[0]){w[0]=window.requestAnimationFrame(function e(t){const n=w[2];const o=w[4];const i=d();const s=(n-i)*o;if(s<=0)return w[0]=null,w[14]=null,void("function"==typeof w[10]&&window.requestAnimationFrame(w[10]));try{const r=w[0],l="function"==typeof w[14]?14:12;if(c=w[l](s,w[8],t,w[6],i,n,a),r!==w[0])return;if(n!==w[2])return void(w[0]=window.requestAnimationFrame(e));Number.isFinite(c)||(c=uss.calcXStepLength(u))}catch(e){c=uss.calcXStepLength(u)}if(s<=c)return w[0]=null,w[14]=null,f(n),void("function"==typeof w[10]&&window.requestAnimationFrame(w[10]));f(i+c*o);if(0!==c&&i===d())return w[0]=null,w[14]=null,void("function"==typeof w[10]&&window.requestAnimationFrame(w[10]));w[0]=window.requestAnimationFrame(e)}),uss._containersData.set(a,w);let c}}}},scrollYTo:function(e,a=uss._pageScroller,t){if(Number.isFinite(e)&&(a===window||a instanceof HTMLElement))if(uss.getMaxScrollY(a)<1)uss.stopScrollingY(a,t);else{const d=uss.getScrollYCalculator(a);let u=e-d();var n=0<u?1:-1;if((u*=n)<1)uss.stopScrollingY(a,t);else{const f=a!==window?e=>a.scrollTop=e:e=>a.scroll(window.scrollX,e);if(uss._reducedMotion)return f(e),void uss.stopScrollingY(a,t);const w=uss._containersData.get(a)||[];if(w[3]=e,w[5]=n,w[7]=u,w[9]=performance.now(),w[11]=t,"number"!=typeof w[1]){w[1]=window.requestAnimationFrame(function e(t){const n=w[3];const o=w[5];const i=d();const s=(n-i)*o;if(s<=0)return w[1]=null,w[15]=null,void("function"==typeof w[11]&&window.requestAnimationFrame(w[11]));try{const r=w[1],l="function"==typeof w[15]?15:13;if(c=w[l](s,w[9],t,w[7],i,n,a),r!==w[1])return;if(n!==w[3])return void(w[1]=window.requestAnimationFrame(e));Number.isFinite(c)||(c=uss.calcYStepLength(u))}catch(e){c=uss.calcYStepLength(u)}if(s<=c)return w[1]=null,w[15]=null,f(n),void("function"==typeof w[11]&&window.requestAnimationFrame(w[11]));f(i+c*o);if(0!==c&&i===d())return w[1]=null,w[15]=null,void("function"==typeof w[11]&&window.requestAnimationFrame(w[11]));w[1]=window.requestAnimationFrame(e)}),uss._containersData.set(a,w);let c}}}},scrollXBy:function(e,t=uss._pageScroller,n,o=!0){if(Number.isFinite(e)&&(t===window||t instanceof HTMLElement)){if(!o){const i=uss._containersData.get(t)||[];if("number"==typeof i[0]){if(i[10]=n,0===e)return;i[2]+=e;o=i[2]-uss.getScrollXCalculator(t)();return i[4]=0<o?1:-1,i[6]=o*i[4],void(i[8]=performance.now())}}uss.scrollXTo(uss.getScrollXCalculator(t)()+e,t,n)}},scrollYBy:function(e,t=uss._pageScroller,n,o=!0){if(Number.isFinite(e)&&(t===window||t instanceof HTMLElement)){if(!o){const i=uss._containersData.get(t)||[];if("number"==typeof i[1]){if(i[11]=n,0===e)return;i[3]+=e;o=i[3]-uss.getScrollYCalculator(t)();return i[5]=0<o?1:-1,i[7]=o*i[5],void(i[9]=performance.now())}}uss.scrollYTo(uss.getScrollYCalculator(t)()+e,t,n)}},scrollTo:function(t,n,o=uss._pageScroller,i){if(Number.isFinite(t)&&Number.isFinite(n)&&(o===window||o instanceof HTMLElement)){let e={__requiredSteps:1,__currentSteps:0,__function:"function"==typeof i?()=>{e.__currentSteps<e.__requiredSteps?e.__currentSteps++:i()}:null};uss.scrollXTo(t,o,e.__function),uss.scrollYTo(n,o,e.__function)}},scrollBy:function(n,o,i=uss._pageScroller,s,r=!0){if(Number.isFinite(n)&&Number.isFinite(o)&&(i===window||i instanceof HTMLElement)){let e,t;t=r?(e=uss.getScrollXCalculator(i)(),uss.getScrollYCalculator(i)()):(r=uss._containersData.get(i)||[],e="number"==typeof r[0]?r[2]:uss.getScrollXCalculator(i)(),"number"==typeof r[1]?r[3]:uss.getScrollYCalculator(i)()),uss.scrollTo(e+n,t+o,i,s)}},scrollIntoView:function(y,b=!0,M=!0,F,e=!1){if(y===window)"function"==typeof F&&window.requestAnimationFrame(F);else if(y instanceof HTMLElement){let A=-1;const v=uss.getAllScrollableParents(y,e,()=>A++);if(A<0)"function"==typeof F&&window.requestAnimationFrame(F);else{let L=M,h=b,T,E;E=v[A],T=A<1?y:v[A-1],!function e(){const t=uss.calcScrollbarsDimensions(E);const n=uss.calcBordersDimensions(E);const o=E!==window?E.getBoundingClientRect():{left:0,top:0,width:uss._windowWidth,height:uss._windowHeight};const i=o.width;const s=o.height;const r=T.getBoundingClientRect();const l=r.width;const c=r.height;const u=r.left-o.left;const a=r.top-o.top;if("nearest"===b){const w=0<u?u:-u,m=Math.abs(i-u-l),p=Math.abs(.5*(i-l)-u);h=w<p||!(m<p)&&null}if("nearest"===M){const _=0<a?a:-a,g=Math.abs(s-a-c),S=Math.abs(.5*(s-c)-a);L=_<S||!(g<S)&&null}const d=!0===h?n[3]:!1===h?i-l-t[0]-n[1]:.5*(i-l-t[0]-n[1]+n[3]);const f=!0===L?n[0]:!1===L?s-c-t[1]-n[2]:.5*(s-c-t[1]-n[2]+n[0]);uss.scrollBy(u-d,a-f,E,()=>{T===y?"function"==typeof F&&window.requestAnimationFrame(F):(A--,E=v[A],T=A<1?y:v[A-1],e())})}()}}},scrollIntoViewIfNeeded:function(H,I=!0,N,e=!1){if(H===window)"function"==typeof N&&window.requestAnimationFrame(N);else if(H instanceof HTMLElement){let C=-1;const U=uss.getAllScrollableParents(H,e,()=>C++);if(C<0)"function"==typeof N&&window.requestAnimationFrame(N);else{let M=null,F=null,v,D;D=U[C],v=C<1?H:U[C-1],!function e(){const t=uss.calcScrollbarsDimensions(D);const n=uss.calcBordersDimensions(D);const o=D!==window?D.getBoundingClientRect():{left:0,top:0,width:uss._windowWidth,height:uss._windowHeight};const i=o.width;const s=o.height;const r=v.getBoundingClientRect();const l=r.width;const c=r.height;const u=r.left-o.left;const a=r.top-o.top;const d=-1<u&&u+l-i+t[0]<1;const f=-1<a&&a+c-s+t[1]<1;const w=u<=0&&0<=u+l-i+t[0];const m=a<=0&&0<=a+c-s+t[1];const p=v===H;let _=d||p&&w;let g=f||p&&m;if(_&&g)return void(p?"function"==typeof N&&window.requestAnimationFrame(N):(C--,D=U[C],v=C<1?H:U[C-1],e()));if(p&&!0===I)_=!1,g=!1;else{if(!_){const h=0<u?u:-u,T=Math.abs(i-u-l),E=Math.abs(.5*(i-l)-u);F=h<E||!(T<E)&&null}if(!g){const A=0<a?a:-a,y=Math.abs(s-a-c),b=Math.abs(.5*(s-c)-a);M=A<b||!(y<b)&&null}}const S=_?u:!0===F?n[3]:!1===F?i-l-t[0]-n[1]:.5*(i-l-t[0]-n[1]+n[3]);const L=g?a:!0===M?n[0]:!1===M?s-c-t[1]-n[2]:.5*(s-c-t[1]-n[2]+n[0]);uss.scrollBy(u-S,a-L,D,()=>{v===H?"function"==typeof N&&window.requestAnimationFrame(N):(C--,D=U[C],v=C<1?H:U[C-1],e())})}()}}},stopScrollingX:function(e=uss._pageScroller,t){if(e===window||e instanceof HTMLElement){const n=uss._containersData.get(e)||[];window.cancelAnimationFrame(n[0]),n[0]=null,n[14]=null,"function"==typeof t&&window.requestAnimationFrame(t)}},stopScrollingY:function(e=uss._pageScroller,t){if(e===window||e instanceof HTMLElement){const n=uss._containersData.get(e)||[];window.cancelAnimationFrame(n[1]),n[1]=null,n[15]=null,"function"==typeof t&&window.requestAnimationFrame(t)}},stopScrolling:function(e=uss._pageScroller,t){if(e===window||e instanceof HTMLElement){const n=uss._containersData.get(e)||[];window.cancelAnimationFrame(n[0]),window.cancelAnimationFrame(n[1]),n[0]=null,n[1]=null,n[14]=null,n[15]=null,"function"==typeof t&&window.requestAnimationFrame(t)}},hrefSetup:function(t=!0,n=!0,e,o,i=!1,s=!1){const r="function"==typeof e?e:()=>{};var e=document.links,l=document.URL.split("#")[0];const c=s&&!!(window.history&&window.history.pushState&&window.history.scrollRestoration);c&&(window.history.scrollRestoration="manual",window.addEventListener("popstate",function(){var e=document.URL.split("#")[1];e?null!==(e=document.getElementById(e)||document.querySelector("a[name='"+e+"']"))&&!1!==r(window,e)&&uss.scrollIntoView(e,t,n,o,i):!1!==r(window,uss._pageScroller)&&uss.scrollTo(0,0,uss._pageScroller,o)},{passive:!0}),window.addEventListener("unload",e=>{e.preventDefault()},{passive:!1}));for(const u of e){const a=u.href.split("#");if(a[0]===l)if(""===a[1])u.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),!1!==r(u,uss._pageScroller)&&(c&&"#"!==window.history.state&&window.history.pushState("#","","#"),uss.scrollTo(0,0,uss._pageScroller,o))},{passive:!1});else{const d=document.getElementById(a[1])||document.querySelector("a[name='"+a[1]+"']");null!==d&&u.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),!1!==r(u,d)&&(c&&window.history.state!==a[1]&&window.history.pushState(a[1],"","#"+a[1]),uss.scrollIntoView(d,t,n,o,i))},{passive:!1})}}}};export default uss;window.addEventListener("resize",()=>{uss._windowHeight=window.innerHeight,uss._windowWidth=window.innerWidth},{passive:!0}),window.addEventListener("load",function e(){const t=document.createElement("div");t.style.overflowX="scroll",document.body.appendChild(t),uss._scrollbarsMaxDimension=t.offsetHeight-t.clientHeight,document.body.removeChild(t),window.removeEventListener("load",e)},{passive:!0});try{window.matchMedia("(prefers-reduced-motion)").addEventListener("change",()=>{var e;uss._reducedMotion=!uss._reducedMotion;for(e of uss._containersData.keys())uss.stopScrolling(e)},{passive:!0})}catch(e){window.matchMedia("(prefers-reduced-motion)").addListener(()=>{var e;uss._reducedMotion=!uss._reducedMotion;for(e of uss._containersData.keys())uss.stopScrolling(e)},{passive:!0})}